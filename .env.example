# ============================================
# VIVA VOCE EXAMINER - ENVIRONMENT CONFIGURATION
# ============================================
# Copy this file to .env and fill in the actual values
# DO NOT commit .env to git - add to .gitignore

# ============================================
# APPLICATION SETTINGS
# ============================================
APP_NAME=VivaVoiceExaminer
APP_ENV=development  # development, staging, production
APP_DEBUG=True
APP_LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
SECRET_KEY=your-secret-key-here-change-in-production

# ============================================
# SERVER CONFIGURATION
# ============================================
HOST=0.0.0.0
PORT=8000
WORKERS=4
WORKER_CLASS=uvicorn.workers.UvicornWorker

# ============================================
# DATABASE CONFIGURATION
# ============================================
# PostgreSQL
DATABASE_TYPE=postgresql  # postgresql, mongodb
DATABASE_USER=postgres
DATABASE_PASSWORD=your-secure-password
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=viva_voce_db
DATABASE_POOL_SIZE=20
DATABASE_ECHO=False

# MongoDB (if using)
# MONGO_URI=mongodb://username:password@localhost:27017/viva_voce_db

# ============================================
# REDIS CONFIGURATION (CACHE & SESSIONS)
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=50

# ============================================
# MODEL PATHS & CONFIGURATION
# ============================================
# Whisper Model Path
WHISPER_MODEL=large-v3  # tiny, small, medium, large-v3
WHISPER_DEVICE=cuda  # cuda, cpu
WHISPER_COMPUTE_TYPE=float16  # float32, float16
WHISPER_NUM_WORKERS=4

# Silero VAD Model
VAD_MODEL_PATH=./models/silero_vad.pt
VAD_SAMPLE_RATE=16000
VAD_SPEECH_THRESHOLD=0.6
VAD_MIN_SPEECH_DURATION_MS=250
VAD_MIN_SILENCE_DURATION_MS=100

# vLLM Configuration
VLLM_MODEL_PATH=meta-llama/Llama-2-7b-chat-hf  # Path or model ID
VLLM_TENSOR_PARALLEL_SIZE=1  # For multi-GPU
VLLM_GPU_MEMORY_UTILIZATION=0.9
VLLM_ENABLE_PREFIX_CACHING=True
VLLM_SWAP_SPACE=4  # GB for CPU swap
VLLM_DTYPE=half  # full, half, bfloat16

# VibeVoice TTS Model
TTS_MODEL_PATH=./models/vibevoice_0.5b
TTS_SAMPLE_RATE=16000
TTS_DEVICE=cuda
TTS_SPEAKER_ID=0  # Indian accent speaker

# ============================================
# RUNPOD CONFIGURATION
# ============================================
RUNPOD_API_KEY=your-runpod-api-key
RUNPOD_ENDPOINT_ID=your-endpoint-id
RUNPOD_TIMEOUT=600  # seconds

# ============================================
# WEBSOCKET CONFIGURATION
# ============================================
WEBSOCKET_HEARTBEAT=30  # seconds
WEBSOCKET_TIMEOUT=300  # seconds
WEBSOCKET_MAX_CONNECTIONS=100
WEBSOCKET_MESSAGE_QUEUE_SIZE=1000

# ============================================
# AUDIO CONFIGURATION
# ============================================
AUDIO_SAMPLE_RATE=16000  # Hz
AUDIO_CHANNELS=1  # mono
AUDIO_CHUNK_SIZE=4096  # samples
AUDIO_FORMAT=pcm16  # pcm16, pcm32, float32
AUDIO_MAX_DURATION=300  # seconds per session

# ============================================
# LATENCY & PERFORMANCE
# ============================================
ASR_TIMEOUT=30  # seconds
LLM_TIMEOUT=30  # seconds
TTS_TIMEOUT=30  # seconds
BARGE_IN_LATENCY_MS=50  # Target latency for interruption

# ============================================
# VIVA CONFIGURATION
# ============================================
VIVA_SCENARIOS_PER_TYPE=4  # Scenarios per viva
VIVA_QUESTIONS_PER_SCENARIO=3  # Questions per scenario
VIVA_TOTAL_QUESTIONS=12  # Total questions (4 * 3)
VIVA_SESSION_TIMEOUT=1800  # seconds (30 minutes)
VIVA_ALLOW_RETAKE=False

# ============================================
# LOGGING CONFIGURATION
# ============================================
LOG_FILE=./logs/viva_voce.log
LOG_ROTATION=10MB
LOG_RETENTION=7  # days
LOG_FORMAT=json  # json, text

# ============================================
# SENTRY CONFIGURATION (ERROR TRACKING)
# ============================================
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# ============================================
# AWS S3 (FOR STORING SESSION RECORDINGS)
# ============================================
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET=viva-voce-recordings
AWS_S3_UPLOAD_PATH=sessions/

# ============================================
# EMAIL CONFIGURATION (FOR REPORTS)
# ============================================
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_SENDER_ADDRESS=your-email@gmail.com
EMAIL_SENDER_PASSWORD=your-app-password
EMAIL_ENABLE_TLS=True

# ============================================
# EXTERNAL APIS
# ============================================
OPENAI_API_KEY=  # Optional: for fine-tuning or validation
HUGGINGFACE_TOKEN=

# ============================================
# CORS & SECURITY
# ============================================
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000,https://yourdomain.com
ALLOWED_METHODS=*
ALLOWED_HEADERS=*
ALLOW_CREDENTIALS=True
MAX_AGE=3600

# ============================================
# FEATURE FLAGS
# ============================================
ENABLE_BARGE_IN=True
ENABLE_SESSION_RECORDING=True
ENABLE_ANALYTICS=True
ENABLE_PDF_REPORTS=True
ENABLE_EMAIL_REPORTS=False
ENABLE_DEBUG_ENDPOINTS=False
